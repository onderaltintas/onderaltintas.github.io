<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Zaman Çizgisi — Evren → Dünya → Dinozorlar → İnsanlık</title>
<style>
  :root{
    --bg:#071027;
    --line-h:8px;
    --pad:18px;
    --font-sans:"Segoe UI",Roboto,Arial,sans-serif;
    --blue:#2b8cff;
    --green:#28c76f;
    --orange:#ff8a3d;
    --red:#ff4d6d;
    --muted:#9aa5b1;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#020417 0%,var(--bg) 100%);color:#e6eef6;font-family:var(--font-sans);}
  .wrap{width:calc(100% - 40px);max-width:1400px;margin:24px auto;padding:var(--pad);box-sizing:border-box;}
  h1{margin:0 0 12px;font-weight:600;font-size:20px;color:#fff}
  .controls{display:flex;gap:10px;align-items:center;margin-bottom:14px;flex-wrap:wrap}
  button{background:#0f2938;border:1px solid #203445;color:#d9e6f2;padding:8px 12px;border-radius:8px;cursor:pointer}
  button:hover{opacity:.95}
  .muted{color:var(--muted);font-size:13px}
  .timeline{position:relative;height:160px;padding:20px 0}
  .line{position:relative;height:var(--line-h);background:#142233;border-radius:6px;overflow:visible;width:100%}
  .segment{position:absolute;top:50%;transform:translateY(-50%);height:var(--line-h);border-radius:6px}
  .label{position:absolute;transform:translateX(-50%);font-size:13px;white-space:nowrap}
  .marker{position:absolute;top:50%;transform:translate(-50%,-50%);width:14px;height:14px;border-radius:50%;background:#fff;box-shadow:0 0 12px rgba(255,255,255,0.06);z-index:20}
  .playhead{position:absolute;left:0;top:0;width:2px;height:100%;background:rgba(255,255,255,0.06);pointer-events:none;z-index:10}
  .desc{margin-top:18px;padding:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:8px;font-size:14px}
  .legend{display:flex;gap:14px;margin-top:12px;flex-wrap:wrap}
  .legitem{display:flex;gap:8px;align-items:center;font-size:13px;color:var(--muted)}
  .dot{width:12px;height:12px;border-radius:3px}
  .controls input[type=range]{width:220px}
  .time-display{margin-left:auto;font-weight:600}
  .small{font-size:13px;color:var(--muted)}
  .credit{font-size:12px;color:var(--muted);margin-top:10px}
  @media(max-width:620px){.controls{flex-direction:column;align-items:flex-start}.time-display{margin-left:0}}
</style>
</head>
<body>
<div class="wrap">
  <h1>Zaman Çizgisi: Evren → Dünya → Dinozorlar → İnsanlık</h1>
  <div class="controls">
    <button id="playBtn">Oynat</button>
    <button id="pauseBtn">Duraklat</button>
    <button id="resetBtn">Sıfırla</button>
    <label class="muted">Toplam Süre (s)</label>
    <input id="durationRange" type="range" min="8" max="240" value="60">
    <div class="time-display"><span id="totalTime">60</span>s</div>
    <label class="muted">Ses</label>
    <button id="muteBtn">Sessiz</button>
  </div>

  <div class="timeline" id="timeline">
    <div class="line" id="line"></div>
    <div class="playhead" id="playhead" style="left:0%"></div>
    <div id="marker" class="marker" style="left:0%"></div>
  </div>

  <div class="desc" id="desc">Başlangıç. Evren doğuyor.</div>

  <div class="legend">
    <div class="legitem"><div class="dot" style="background:var(--blue)"></div>Evren</div>
    <div class="legitem"><div class="dot" style="background:var(--green)"></div>Dünya</div>
    <div class="legitem"><div class="dot" style="background:var(--orange)"></div>Dinozorlar</div>
    <div class="legitem"><div class="dot" style="background:var(--red)"></div>İnsanlık</div>
  </div>
  <div class="credit small">Renkler: Evren mavi, Dünya yeşil, Dinozor turuncu, İnsan kırmızı.</div>
</div>

<script>
const universeAge=13.75e9,earthAge=4.543e9,dinosStartAgo=245e6,dinosEndAgo=66e6,humansAgo=300000;
const T=universeAge,earthFormTime=T-earthAge,dinosStartTime=T-dinosStartAgo,dinosEndTime=T-dinosEndAgo,humansStartTime=T-humansAgo;
const epochs=[
{id:'evren',name:'Evren',color:getComputedStyle(document.documentElement).getPropertyValue('--blue').trim()||'#2b8cff',start:0,end:T},
{id:'dunya',name:'Dünya',color:getComputedStyle(document.documentElement).getPropertyValue('--green').trim()||'#28c76f',start:earthFormTime,end:T},
{id:'dino',name:'Dinozorlar',color:getComputedStyle(document.documentElement).getPropertyValue('--orange').trim()||'#ff8a3d',start:dinosStartTime,end:dinosEndTime},
{id:'insan',name:'İnsanlık',color:getComputedStyle(document.documentElement).getPropertyValue('--red').trim()||'#ff4d6d',start:humansStartTime,end:T}
];
const lineEl=document.getElementById('line'),playheadEl=document.getElementById('playhead'),markerEl=document.getElementById('marker'),descEl=document.getElementById('desc'),totalTimeEl=document.getElementById('totalTime'),durationRange=document.getElementById('durationRange'),playBtn=document.getElementById('playBtn'),pauseBtn=document.getElementById('pauseBtn'),resetBtn=document.getElementById('resetBtn'),muteBtn=document.getElementById('muteBtn');
let totalAnimationSeconds=Number(durationRange.value)||60;totalTimeEl.textContent=totalAnimationSeconds;
durationRange.addEventListener('input',()=>{totalAnimationSeconds=Number(durationRange.value);totalTimeEl.textContent=totalAnimationSeconds;});
function renderSegments(){
  lineEl.querySelectorAll('.segment,.label').forEach(e=>e.remove());
  const W=lineEl.clientWidth;
  epochs.forEach(e=>{
    const leftPct=(e.start/T)*100,rightPct=(e.end/T)*100,widthPct=Math.max(rightPct-leftPct,0.2);
    const seg=document.createElement('div');
    seg.className='segment';seg.style.left=leftPct+'%';seg.style.width=widthPct+'%';seg.style.background=e.color;lineEl.appendChild(seg);
    const lab=document.createElement('div');lab.className='label';lab.style.left=(leftPct+widthPct/2)+'%';
    lab.textContent=e.id==='evren'?`Evren (${(T/1e9).toFixed(2)} milyar yıl)`:
      e.id==='dunya'?`Dünya (${(earthAge/1e9).toFixed(3)} milyar yıl önce)`:
      e.id==='dino'?`Dinozorlar (${(dinosStartAgo/1e6)|0}M - ${(dinosEndAgo/1e6)|0}M yıl)`:
      `İnsanlık (~${(humansAgo/1000)|0}k yıl)`;
    // etiketlerin üst üste binmemesi için küçük dikey offset farkı
    lab.style.top=e.id==='dino'?'calc(50% - 55px)':e.id==='insan'?'calc(50% - 28px)':'calc(50% - 42px)';
    lineEl.appendChild(lab);
  });
  markerEl.style.left='0%';playheadEl.style.left='0%';
}
window.addEventListener('resize',renderSegments);renderSegments();

function formatYears(y){y=Math.max(0,Math.round(y));if(y>=1e9)return(y/1e9).toFixed(3).replace(/\.?0+$/,'')+' milyar yıl';if(y>=1e6)return(y/1e6).toFixed(0)+' milyon yıl';if(y>=1e3)return(y/1e3).toFixed(0)+' bin yıl';return y+' yıl';}
let rafId=null,running=false,progress=0,startWall=null;
function updateFrame(now){
  if(startWall===null)startWall=now-progress*totalAnimationSeconds*1000;
  const elapsed=(now-startWall)/1000;progress=Math.min(elapsed/totalAnimationSeconds,1);
  const pct=progress*100;playheadEl.style.left=pct+'%';markerEl.style.left=pct+'%';
  const currentTime=progress*T;
  let displayEarthAge=0;if(currentTime>=earthFormTime)displayEarthAge=Math.min(currentTime-earthFormTime,earthAge);
  let inDino=(currentTime>=dinosStartTime&&currentTime<=dinosEndTime);
  let dinoProgressYears=0;if(currentTime>=dinosStartTime)dinoProgressYears=Math.min(currentTime-dinosStartTime,dinosEndTime-dinosStartTime);
  let displayHumanAge=0;if(currentTime>=humansStartTime)displayHumanAge=Math.min(currentTime-humansStartTime,humansAgo);
  let message='';
  if(currentTime<earthFormTime)message=`Evrenin yaşı: ${formatYears(currentTime)} — Dünya yok.`;else if(currentTime<dinosStartTime)message=`Dünya oluştu (${formatYears(displayEarthAge)}).`;else if(inDino)message=`Dinozorlar dönemi (${formatYears(dinoProgressYears)} geçti).`;else if(currentTime<humansStartTime)message=`Dinozorlar yok oldu, Dünya evrimleşiyor.`;else message=`İnsanlık dönemi (${formatYears(displayHumanAge)}).`;
  descEl.textContent=message;scheduleAudioEvents(currentTime);
  if(progress<1&&running)rafId=requestAnimationFrame(updateFrame);else{running=false;if(rafId)cancelAnimationFrame(rafId);startWall=null;}
}
const audioCtx=new(window.AudioContext||window.webkitAudioContext)();let isMuted=false;
muteBtn.addEventListener('click',()=>{isMuted=!isMuted;muteBtn.textContent=isMuted?'Ses Aç':'Sessiz';if(!isMuted&&audioCtx.state==='suspended')audioCtx.resume();});
function playTone(f,d,w=0){if(isMuted)return;const t0=audioCtx.currentTime+w,o=audioCtx.createOscillator(),g=audioCtx.createGain();o.type='sine';o.frequency.value=f;g.gain.value=.0001;o.connect(g);g.connect(audioCtx.destination);g.gain.linearRampToValueAtTime(.07,t0+.01);g.gain.exponentialRampToValueAtTime(.0001,t0+d-.02);o.start(t0);o.stop(t0+d);}
let notified={evren:false,dunya:false,dinoStart:false,dinoEnd:false,insan:false};
function scheduleAudioEvents(currentTime){
  const tol=T*.0025;
  if(!notified.evren&&currentTime<=tol){notified.evren=true;playTone(220,.6);}
  if(!notified.dunya&&Math.abs(currentTime-earthFormTime)<=tol){notified.dunya=true;playTone(330,.6);}
  if(!notified.dinoStart&&Math.abs(currentTime-dinosStartTime)<=tol){notified.dinoStart=true;playTone(160,.9);}
  if(!notified.dinoEnd&&Math.abs(currentTime-dinosEndTime)<=tol){notified.dinoEnd=true;playTone(120,.9);}
  if(!notified.insan&&Math.abs(currentTime-humansStartTime)<=tol){notified.insan=true;playTone(660,.6);}
}
playBtn.addEventListener('click',async()=>{if(audioCtx.state==='suspended')await audioCtx.resume();if(!running){running=true;startWall=performance.now()-progress*totalAnimationSeconds*1000;rafId=requestAnimationFrame(updateFrame);}});
pauseBtn.addEventListener('click',()=>{if(running){running=false;if(rafId)cancelAnimationFrame(rafId);startWall=null;}});
resetBtn.addEventListener('click',()=>{running=false;if(rafId)cancelAnimationFrame(rafId);progress=0;startWall=null;notified={evren:false,dunya:false,dinoStart:false,dinoEnd:false,insan:false};playheadEl.style.left='0%';markerEl.style.left='0%';descEl.textContent='Başlangıç. Evren doğuyor.';});
playheadEl.addEventListener('click',()=>playBtn.click());
</script>
</body>
</html>
